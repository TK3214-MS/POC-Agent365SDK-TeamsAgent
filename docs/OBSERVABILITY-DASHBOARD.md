# Observability Dashboard ã‚¬ã‚¤ãƒ‰

**ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹•ä½œã‚’å¯è¦–åŒ–** - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å†…éƒ¨å‹•ä½œã€ä¼šè©±ãƒ•ãƒ­ãƒ¼ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç›£è¦–

---

## ğŸ“‹ æ¦‚è¦

Observability Dashboardã¯ã€å–¶æ¥­æ”¯æ´ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§å¯è¦–åŒ–ã™ã‚‹Webãƒ™ãƒ¼ã‚¹ã®ç›£è¦–ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚SignalRã‚’åˆ©ç”¨ã—ãŸãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šä¿¡ã«ã‚ˆã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çŠ¶æ…‹ã€ä¼šè©±æ™‚ç³»åˆ—ã€AIæ¨è«–ãƒ—ãƒ­ã‚»ã‚¹ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å³åº§ã«ç¢ºèªã§ãã¾ã™ã€‚

### ğŸ’¡ ä¸»ãªæ©Ÿèƒ½

| æ©Ÿèƒ½ | èª¬æ˜ |
|-----|------|
| ğŸ”´ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–** | SignalRã§ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå‹•ä½œã‚’å³åº§ã«åæ˜  |
| ğŸ“Š **ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹è¡¨ç¤º** | ã‚¢ã‚¯ãƒ†ã‚£ãƒ–/ã‚¢ã‚¤ãƒ‰ãƒ«çŠ¶æ…‹ã€æœ€çµ‚ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£æ™‚åˆ» |
| ğŸ’¬ **ä¼šè©±ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ã‚„ã‚Šå–ã‚Šã‚’æ™‚ç³»åˆ—è¡¨ç¤º |
| ğŸ” **è©³ç´°ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º** | AIæ¨è«–ã®å†…éƒ¨ã‚¹ãƒ†ãƒƒãƒ—ã‚’å¯è¦–åŒ– |
| ğŸ“ˆ **ãƒ¡ãƒˆãƒªã‚¯ã‚¹è¡¨ç¤º** | å¿œç­”æ™‚é–“ã€APIå‘¼ã³å‡ºã—å›æ•°ã€æˆåŠŸç‡ |
| ğŸ¨ **Fluent UIçµ±åˆ** | Microsoftãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ æº–æ‹ ã®ãƒ¢ãƒ€ãƒ³UI |

### ğŸ¯ ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤

- **ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°åŠ¹ç‡åŒ–**: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œã‚’å³åº§ã«ç¢ºèªã—ã€å•é¡Œã‚’è¿…é€Ÿã«ç‰¹å®š
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ãƒœãƒˆãƒ«ãƒãƒƒã‚¯ã‚’å¯è¦–åŒ–ã—ã€æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã‚’ç™ºè¦‹
- **é€æ˜æ€§ã®ç¢ºä¿**: AIã®æ¨è«–ãƒ—ãƒ­ã‚»ã‚¹ã‚’å¯è¦–åŒ–ã—ã€èª¬æ˜è²¬ä»»ã‚’æœãŸã™
- **é–‹ç™ºåŠ¹ç‡å‘ä¸Š**: ãƒ‡ãƒãƒƒã‚°æ™‚é–“ã‚’çŸ­ç¸®ã—ã€é–‹ç™ºã‚µã‚¤ã‚¯ãƒ«ã‚’åŠ é€Ÿ

---

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### ã‚¢ã‚¯ã‚»ã‚¹æ–¹æ³•

```bash
# ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
cd /Users/tk3214/GitHub/POC-Agent365SDK-TeamsAgent/SalesSupportAgent
dotnet run

# ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
open https://localhost:5192/observability.html
```

**URL**: `https://localhost:5192/observability.html`

### åˆå›ã‚¢ã‚¯ã‚»ã‚¹æ™‚

1. ãƒ–ãƒ©ã‚¦ã‚¶ã§ä¸Šè¨˜URLã«ã‚¢ã‚¯ã‚»ã‚¹
2. è‡ªå·±ç½²åè¨¼æ˜æ›¸ã®è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯ã€Œè©³ç´°ã€â†’ã€Œç¶šè¡Œã€
3. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¡¨ç¤ºã•ã‚Œã€SignalRæ¥ç¶šãŒè‡ªå‹•çš„ã«ç¢ºç«‹ã•ã‚Œã¾ã™
4. æ¥ç¶šçŠ¶æ…‹ãŒç”»é¢å³ä¸Šã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆç·‘: æ¥ç¶šä¸­ã€èµ¤: åˆ‡æ–­ï¼‰

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ãƒ–ãƒ©ã‚¦ã‚¶ (observability.html)        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Vue 3 + Fluent UI System Icons      â”‚   â”‚
â”‚  â”‚  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ UIæ›´æ–°                 â”‚   â”‚
â”‚  â”‚  - ä¼šè©±ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³è¡¨ç¤º               â”‚   â”‚
â”‚  â”‚  - ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ©ã‚¤ã‚¼ãƒ¼ã‚·ãƒ§ãƒ³    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ SignalR (WebSocket)
                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å–¶æ¥­æ”¯æ´ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (.NET 10)          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  ObservabilityHub (SignalR Hub)      â”‚   â”‚
â”‚  â”‚  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¤ãƒ™ãƒ³ãƒˆé…ä¿¡           â”‚   â”‚
â”‚  â”‚  - æ¥ç¶šç®¡ç†                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                 â”‚                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Agent Telemetry                     â”‚   â”‚
â”‚  â”‚  - AgentMetrics (OpenTelemetry)     â”‚   â”‚
â”‚  â”‚  - ActivitySource, Meter, Counter   â”‚   â”‚
â”‚  â”‚  - Transcript Logging               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SignalR Hub

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `/hubs/observability`

```csharp
public class ObservabilityHub : Hub
{
    // ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¸ã®ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡
    await Clients.All.SendAsync("AgentStatusUpdated", status);
    await Clients.All.SendAsync("ConversationUpdated", conversation);
    await Clients.All.SendAsync("PhaseUpdated", phase);
}
```

---

## ğŸ“Š ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰UI

### 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹ãƒ‘ãƒãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ çŠ¶æ…‹: â— ã‚¢ã‚¯ãƒ†ã‚£ãƒ–                       â”‚
â”‚ æœ€çµ‚ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£: 2026-02-08 14:30:25 â”‚
â”‚ ç·ä¼šè©±æ•°: 15                             â”‚
â”‚ å¹³å‡å¿œç­”æ™‚é–“: 2.3ç§’                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¡¨ç¤ºé …ç›®**:
- **çŠ¶æ…‹**: ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ï¼ˆç·‘ï¼‰/ ã‚¢ã‚¤ãƒ‰ãƒ«ï¼ˆç°ï¼‰/ ã‚¨ãƒ©ãƒ¼ï¼ˆèµ¤ï¼‰
- **æœ€çµ‚ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£**: æœ€å¾Œã«ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒå‹•ä½œã—ãŸæ™‚åˆ»
- **ç·ä¼šè©±æ•°**: èµ·å‹•å¾Œã®ç·ä¼šè©±æ•°
- **å¹³å‡å¿œç­”æ™‚é–“**: å…¨ä¼šè©±ã®å¹³å‡å¿œç­”æ™‚é–“

### 2. ä¼šè©±ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¬ ä¼šè©±ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [14:30] ãƒ¦ãƒ¼ã‚¶ãƒ¼                         â”‚
â”‚ â”” ä»Šé€±ã®å•†è«‡ã‚µãƒãƒªã‚’æ•™ãˆã¦                â”‚
â”‚                                          â”‚
â”‚ [14:30] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ (å‡¦ç†ä¸­...)          â”‚
â”‚ â”œ [Phase 1] ãƒ¡ãƒ¼ãƒ«æ¤œç´¢é–‹å§‹                â”‚
â”‚ â”œ [Phase 2] ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ¤œç´¢é–‹å§‹            â”‚
â”‚ â”œ [Phase 3] SharePointæ¤œç´¢é–‹å§‹           â”‚
â”‚ â”œ [Phase 4] AIçµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ            â”‚
â”‚ â”” [å®Œäº†] Adaptive Cardé€ä¿¡               â”‚
â”‚                                          â”‚
â”‚ [14:31] ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ                      â”‚
â”‚ â”” [å•†è«‡ã‚µãƒãƒªã‚’è¡¨ç¤º]                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¡¨ç¤ºå†…å®¹**:
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆé’èƒŒæ™¯ï¼‰
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¿œç­”ï¼ˆç·‘èƒŒæ™¯ï¼‰
- å‡¦ç†ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆå±•é–‹å¯èƒ½ï¼‰
- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆæ™‚:åˆ†:ç§’ï¼‰
- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆèµ¤èƒŒæ™¯ï¼‰

### 3. è©³ç´°ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º

å„ä¼šè©±ã®ã€Œè©³ç´°ã‚’è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å±•é–‹:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ” ãƒ•ã‚§ãƒ¼ã‚ºè©³ç´°: ä»Šé€±ã®å•†è«‡ã‚µãƒãƒªã‚’æ•™ãˆã¦ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Phase 1: ãƒ¡ãƒ¼ãƒ«æ¤œç´¢                      â”‚
â”‚ â”œ é–‹å§‹: 14:30:25.123                     â”‚
â”‚ â”œ çµ‚äº†: 14:30:26.456                     â”‚
â”‚ â”œ æ‰€è¦æ™‚é–“: 1.33ç§’                        â”‚
â”‚ â”œ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æˆåŠŸ                     â”‚
â”‚ â”” çµæœ: 15ä»¶ã®ãƒ¡ãƒ¼ãƒ«ã‚’å–å¾—                â”‚
â”‚                                          â”‚
â”‚ Phase 2: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ¤œç´¢                  â”‚
â”‚ â”œ é–‹å§‹: 14:30:26.500                     â”‚
â”‚ â”œ çµ‚äº†: 14:30:27.200                     â”‚
â”‚ â”œ æ‰€è¦æ™‚é–“: 0.70ç§’                        â”‚
â”‚ â”œ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æˆåŠŸ                     â”‚
â”‚ â”” çµæœ: 8ä»¶ã®äºˆå®šã‚’å–å¾—                   â”‚
â”‚                                          â”‚
â”‚ Phase 3: SharePointæ¤œç´¢                  â”‚
â”‚ â”œ é–‹å§‹: 14:30:27.250                     â”‚
â”‚ â”œ çµ‚äº†: 14:30:28.100                     â”‚
â”‚ â”œ æ‰€è¦æ™‚é–“: 0.85ç§’                        â”‚
â”‚ â”œ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æˆåŠŸ                     â”‚
â”‚ â”” çµæœ: 12ä»¶ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å–å¾—          â”‚
â”‚                                          â”‚
â”‚ Phase 4: AIæ¨è«–                          â”‚
â”‚ â”œ é–‹å§‹: 14:30:28.150                     â”‚
â”‚ â”œ çµ‚äº†: 14:30:30.500                     â”‚
â”‚ â”œ æ‰€è¦æ™‚é–“: 2.35ç§’                        â”‚
â”‚ â”œ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: âœ… æˆåŠŸ                     â”‚
â”‚ â”œ LLM: Azure OpenAI (gpt-4o)            â”‚
â”‚ â”œ ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨: 1,250 (å…¥åŠ›) + 450 (å‡ºåŠ›) â”‚
â”‚ â”” çµæœ: çµ±åˆãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆå®Œäº†              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‘ãƒãƒ«

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ˆ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ APIå‘¼ã³å‡ºã—çµ±è¨ˆ (éå»1æ™‚é–“)              â”‚
â”‚ â”œ Graph API: 45å› (æˆåŠŸ: 44, å¤±æ•—: 1)   â”‚
â”‚ â”œ LLM API: 15å› (æˆåŠŸ: 15, å¤±æ•—: 0)     â”‚
â”‚ â”” å¹³å‡å¿œç­”æ™‚é–“: 1.2ç§’                     â”‚
â”‚                                          â”‚
â”‚ ãƒˆãƒ¼ã‚¯ãƒ³ä½¿ç”¨çµ±è¨ˆ                         â”‚
â”‚ â”œ ç·ãƒˆãƒ¼ã‚¯ãƒ³: 18,750                     â”‚
â”‚ â”œ å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³: 12,500 (å¹³å‡: 833/ä¼šè©±)  â”‚
â”‚ â”” å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³: 6,250 (å¹³å‡: 417/ä¼šè©±)   â”‚
â”‚                                          â”‚
â”‚ ã‚¨ãƒ©ãƒ¼ç‡                                 â”‚
â”‚ â”œ å…¨ä½“: 2.2% (1/45)                      â”‚
â”‚ â”œ èªè¨¼ã‚¨ãƒ©ãƒ¼: 0                          â”‚
â”‚ â”” ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ: 1                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ SignalRçµ±åˆ

### ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ï¼ˆJavaScriptï¼‰

```javascript
// SignalRæ¥ç¶šç¢ºç«‹
const connection = new signalR.HubConnectionBuilder()
    .withUrl("/hubs/observability")
    .withAutomaticReconnect()
    .build();

// ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ç™»éŒ²
connection.on("AgentStatusUpdated", (status) => {
    console.log("Agent Status:", status);
    updateAgentStatus(status);
});

connection.on("ConversationUpdated", (conversation) => {
    console.log("Conversation:", conversation);
    addConversationToTimeline(conversation);
});

connection.on("PhaseUpdated", (phase) => {
    console.log("Phase:", phase);
    updatePhaseDetails(phase);
});

// æ¥ç¶šé–‹å§‹
await connection.start();
console.log("SignalR Connected");
```

### ã‚µãƒ¼ãƒãƒ¼å´ï¼ˆC#ï¼‰

```csharp
// ObservabilityHub.cs
public class ObservabilityHub : Hub
{
    public override async Task OnConnectedAsync()
    {
        await Clients.Caller.SendAsync("Connected", 
            new { Message = "Dashboard connected" });
        await base.OnConnectedAsync();
    }

    public override async Task OnDisconnectedAsync(Exception? exception)
    {
        // ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—å‡¦ç†
        await base.OnDisconnectedAsync(exception);
    }
}

// ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡
public class AgentObservabilityService
{
    private readonly IHubContext<ObservabilityHub> _hubContext;

    public async Task NotifyAgentStatus(AgentStatus status)
    {
        await _hubContext.Clients.All.SendAsync(
            "AgentStatusUpdated", 
            status
        );
    }

    public async Task NotifyConversation(Conversation conversation)
    {
        await _hubContext.Clients.All.SendAsync(
            "ConversationUpdated", 
            conversation
        );
    }

    public async Task NotifyPhase(PhaseInfo phase)
    {
        await _hubContext.Clients.All.SendAsync(
            "PhaseUpdated", 
            phase
        );
    }
}
```

---

## ğŸ¨ UIå®Ÿè£…è©³ç´°

### Fluent UI System Iconsçµ±åˆ

```html
<!-- Fluent UI System Icons CDN -->
<link rel="stylesheet" 
      href="https://cdn.jsdelivr.net/npm/@fluentui/svg-icons/icons/index.css">

<!-- ã‚¢ã‚¤ã‚³ãƒ³ä½¿ç”¨ä¾‹ -->
<span class="fluent-icon">
    <svg class="fluent-icon-calendar">
        <use href="#fluent-calendar-24-regular"></use>
    </svg>
</span>
```

**ä½¿ç”¨ã‚¢ã‚¤ã‚³ãƒ³**:
- `fluent-bot-24-regular`: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚¤ã‚³ãƒ³
- `fluent-calendar-24-regular`: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼
- `fluent-mail-24-regular`: ãƒ¡ãƒ¼ãƒ«
- `fluent-folder-24-regular`: SharePoint
- `fluent-people-team-24-regular`: Teams
- `fluent-checkmark-circle-24-regular`: æˆåŠŸ
- `fluent-error-circle-24-regular`: ã‚¨ãƒ©ãƒ¼
- `fluent-spinner-24-regular`: å‡¦ç†ä¸­

### Vue 3å®Ÿè£…

```javascript
const { createApp } = Vue;

createApp({
    data() {
        return {
            agentStatus: {
                state: 'idle',
                lastActivity: null,
                totalConversations: 0,
                averageResponseTime: 0
            },
            conversations: [],
            selectedConversation: null,
            connection: null,
            isConnected: false
        };
    },
    
    async mounted() {
        await this.initializeSignalR();
    },
    
    methods: {
        async initializeSignalR() {
            this.connection = new signalR.HubConnectionBuilder()
                .withUrl("/hubs/observability")
                .withAutomaticReconnect()
                .build();
            
            this.connection.on("AgentStatusUpdated", this.handleStatusUpdate);
            this.connection.on("ConversationUpdated", this.handleConversationUpdate);
            this.connection.on("PhaseUpdated", this.handlePhaseUpdate);
            
            await this.connection.start();
            this.isConnected = true;
        },
        
        handleStatusUpdate(status) {
            this.agentStatus = status;
        },
        
        handleConversationUpdate(conversation) {
            this.conversations.unshift(conversation);
            if (this.conversations.length > 50) {
                this.conversations.pop();
            }
        },
        
        handlePhaseUpdate(phase) {
            const conversation = this.conversations.find(
                c => c.id === phase.conversationId
            );
            if (conversation) {
                if (!conversation.phases) {
                    conversation.phases = [];
                }
                conversation.phases.push(phase);
            }
        },
        
        selectConversation(conversation) {
            this.selectedConversation = conversation;
        },
        
        formatTimestamp(timestamp) {
            return new Date(timestamp).toLocaleTimeString('ja-JP');
        },
        
        formatDuration(milliseconds) {
            return (milliseconds / 1000).toFixed(2) + 'ç§’';
        }
    }
}).mount('#app');
```

---

## ğŸ“ˆ ãƒ¡ãƒˆãƒªã‚¯ã‚¹åé›†

### OpenTelemetryçµ±åˆ

```csharp
// AgentMetrics.cs
public class AgentMetrics
{
    private static readonly ActivitySource ActivitySource = 
        new("SalesSupportAgent");
    
    private static readonly Meter Meter = 
        new("SalesSupportAgent");
    
    private readonly Counter<long> _conversationCounter;
    private readonly Histogram<double> _responseTimeHistogram;
    private readonly Counter<long> _errorCounter;
    
    public AgentMetrics()
    {
        _conversationCounter = Meter.CreateCounter<long>(
            "agent.conversations.total",
            description: "Total number of conversations"
        );
        
        _responseTimeHistogram = Meter.CreateHistogram<double>(
            "agent.response.time",
            description: "Agent response time in seconds"
        );
        
        _errorCounter = Meter.CreateCounter<long>(
            "agent.errors.total",
            description: "Total number of errors"
        );
    }
    
    public void RecordConversation(string result)
    {
        _conversationCounter.Add(1, 
            new KeyValuePair<string, object?>("result", result));
    }
    
    public void RecordResponseTime(double seconds, string phase)
    {
        _responseTimeHistogram.Record(seconds,
            new KeyValuePair<string, object?>("phase", phase));
    }
    
    public void RecordError(string errorType)
    {
        _errorCounter.Add(1,
            new KeyValuePair<string, object?>("type", errorType));
    }
}
```

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹é€ä¿¡

```csharp
// SalesAgent.cs
public async Task<string> ProcessQueryAsync(string query)
{
    var stopwatch = Stopwatch.StartNew();
    
    using var activity = ActivitySource.StartActivity("ProcessQuery");
    activity?.SetTag("query.length", query.Length);
    
    try
    {
        // ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ¡ãƒ¼ãƒ«æ¤œç´¢
        var emailStopwatch = Stopwatch.StartNew();
        var emails = await SearchEmailsAsync(query);
        emailStopwatch.Stop();
        
        _metrics.RecordResponseTime(
            emailStopwatch.Elapsed.TotalSeconds, 
            "email_search"
        );
        
        await _observabilityService.NotifyPhase(new PhaseInfo
        {
            Name = "ãƒ¡ãƒ¼ãƒ«æ¤œç´¢",
            Duration = emailStopwatch.Elapsed,
            Status = "success",
            ResultCount = emails.Count
        });
        
        // ãƒ•ã‚§ãƒ¼ã‚º2: ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼æ¤œç´¢
        // ... (åŒæ§˜ã®ãƒ‘ã‚¿ãƒ¼ãƒ³)
        
        // ãƒ•ã‚§ãƒ¼ã‚º3: AIæ¨è«–
        var aiStopwatch = Stopwatch.StartNew();
        var response = await GenerateResponseAsync(emails, events, docs);
        aiStopwatch.Stop();
        
        _metrics.RecordResponseTime(
            aiStopwatch.Elapsed.TotalSeconds,
            "ai_inference"
        );
        
        stopwatch.Stop();
        _metrics.RecordConversation("success");
        
        activity?.SetTag("total.duration", stopwatch.Elapsed.TotalSeconds);
        
        return response;
    }
    catch (Exception ex)
    {
        _metrics.RecordError(ex.GetType().Name);
        _metrics.RecordConversation("error");
        
        activity?.SetStatus(ActivityStatusCode.Error, ex.Message);
        throw;
    }
}
```

---

## ğŸ” ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½

### ãƒ–ãƒ©ã‚¦ã‚¶é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«

**Consoleå‡ºåŠ›ä¾‹**:
```javascript
[SignalR] Connected to /hubs/observability
[Agent] Status Updated: { state: 'active', ... }
[Conversation] New message: { id: '123', user: '...' }
[Phase] Email search completed in 1.33s
[Phase] Calendar search completed in 0.70s
[Phase] SharePoint search completed in 0.85s
[Phase] AI inference completed in 2.35s
```

### ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç›£è¦–

SignalRæ¥ç¶šã®ç¢ºèª:
1. é–‹ç™ºè€…ãƒ„ãƒ¼ãƒ« â†’ Network ã‚¿ãƒ–
2. WebSocketãƒ•ã‚£ãƒ«ã‚¿ã‚’æœ‰åŠ¹åŒ–
3. `observability` æ¥ç¶šã‚’ç¢ºèª
4. ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ¬ãƒ¼ãƒ ã‚’ç¢ºèª

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒªãƒ³ã‚°

```javascript
// ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¸¬å®š
performance.mark('conversation-start');

// ... å‡¦ç† ...

performance.mark('conversation-end');
performance.measure(
    'conversation-duration',
    'conversation-start',
    'conversation-end'
);

const measure = performance.getEntriesByName('conversation-duration')[0];
console.log(`Duration: ${measure.duration}ms`);
```

---

## âš™ï¸ è¨­å®š

### appsettings.json

```json
{
  "Observability": {
    "Enabled": true,
    "SignalRHubPath": "/hubs/observability",
    "MaxConversationsInMemory": 100,
    "MetricsRetentionMinutes": 60,
    "EnableDetailedPhases": true,
    "EnableTokenCounting": true
  },
  "SignalR": {
    "KeepAliveInterval": "00:00:15",
    "ClientTimeoutInterval": "00:00:30",
    "HandshakeTimeout": "00:00:15"
  }
}
```

### Program.cs

```csharp
// SignalRè¿½åŠ 
builder.Services.AddSignalR(options =>
{
    options.KeepAliveInterval = TimeSpan.FromSeconds(15);
    options.ClientTimeoutInterval = TimeSpan.FromSeconds(30);
    options.HandshakeTimeout = TimeSpan.FromSeconds(15);
});

// ObservabilityHubç™»éŒ²
app.MapHub<ObservabilityHub>("/hubs/observability");

// é™çš„ãƒ•ã‚¡ã‚¤ãƒ«é…ä¿¡ï¼ˆobservability.htmlï¼‰
app.UseStaticFiles();
```

---

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### èªè¨¼ãƒ»èªå¯

```csharp
// æœ¬ç•ªç’°å¢ƒã§ã¯èªè¨¼ã‚’è¿½åŠ 
[Authorize]
public class ObservabilityHub : Hub
{
    public override async Task OnConnectedAsync()
    {
        var userId = Context.User?.Identity?.Name;
        if (string.IsNullOrEmpty(userId))
        {
            Context.Abort();
            return;
        }
        
        // ç®¡ç†è€…æ¨©é™ãƒã‚§ãƒƒã‚¯
        if (!Context.User.IsInRole("Admin"))
        {
            Context.Abort();
            return;
        }
        
        await base.OnConnectedAsync();
    }
}
```

### CORSè¨­å®š

```csharp
builder.Services.AddCors(options =>
{
    options.AddPolicy("ObservabilityPolicy", policy =>
    {
        policy.WithOrigins("https://localhost:5192")
              .AllowAnyHeader()
              .AllowAnyMethod()
              .AllowCredentials();
    });
});

app.UseCors("ObservabilityPolicy");
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°

```csharp
// PIIï¼ˆå€‹äººæƒ…å ±ï¼‰ã‚’ãƒã‚¹ã‚¯
public class PIIFilter
{
    public static string MaskEmail(string email)
    {
        if (string.IsNullOrEmpty(email)) return email;
        
        var parts = email.Split('@');
        if (parts.Length != 2) return "***@***";
        
        return $"{parts[0][0]}***@{parts[1]}";
    }
    
    public static string MaskPhoneNumber(string phone)
    {
        if (string.IsNullOrEmpty(phone)) return phone;
        
        return new string('*', phone.Length - 4) + phone.Substring(phone.Length - 4);
    }
}

// ä½¿ç”¨ä¾‹
await _observabilityService.NotifyPhase(new PhaseInfo
{
    Name = "ãƒ¡ãƒ¼ãƒ«æ¤œç´¢",
    ResultSummary = $"Found {emails.Count} emails from {PIIFilter.MaskEmail(sender)}"
});
```

---

## âš ï¸ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### SignalRæ¥ç¶šã§ããªã„

**ç—‡çŠ¶**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã€Œåˆ‡æ–­ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹

**åŸå› ã¨è§£æ±ºç­–**:

| åŸå›  | è§£æ±ºæ–¹æ³• |
|-----|---------|
| ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒèµ·å‹•ã—ã¦ã„ãªã„ | `dotnet run` ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹• |
| ãƒ‘ã‚¹ãŒé–“é•ã£ã¦ã„ã‚‹ | `/hubs/observability` ãŒæ­£ã—ã„ã‹ç¢ºèª |
| CORSè¨­å®šã‚¨ãƒ©ãƒ¼ | Program.csã§CORSè¨­å®šã‚’ç¢ºèª |
| ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ« | ãƒãƒ¼ãƒˆ5192ãŒé–‹ã„ã¦ã„ã‚‹ã‹ç¢ºèª |

**ãƒ‡ãƒãƒƒã‚°æ‰‹é †**:
```javascript
// ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ç¢ºèª
connection.onclose((error) => {
    console.error('SignalR connection closed:', error);
});

connection.onreconnecting((error) => {
    console.warn('SignalR reconnecting:', error);
});

connection.onreconnected((connectionId) => {
    console.log('SignalR reconnected:', connectionId);
});
```

### ã‚¤ãƒ™ãƒ³ãƒˆãŒå—ä¿¡ã§ããªã„

**ç—‡çŠ¶**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒæ›´æ–°ã•ã‚Œãªã„

**è§£æ±ºç­–**:
1. SignalRæ¥ç¶šçŠ¶æ…‹ã‚’ç¢ºèªï¼ˆç·‘ãƒ©ãƒ³ãƒ—ï¼‰
2. ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
3. ã‚µãƒ¼ãƒãƒ¼å´ã®ãƒ­ã‚°ã‚’ç¢ºèªï¼ˆ`dotnet run`ã®å‡ºåŠ›ï¼‰
4. ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãŒæ­£ã—ãç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

```javascript
// ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ã®ãƒ‡ãƒãƒƒã‚°
connection.on("AgentStatusUpdated", (status) => {
    console.log("âœ… AgentStatusUpdated received:", status);
});
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé…ã„

**ç—‡çŠ¶**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®æ›´æ–°ãŒé…å»¶ã™ã‚‹

**åŸå› ã¨å¯¾ç­–**:

| åŸå›  | å¯¾ç­– |
|-----|------|
| éå‰°ãªãƒ­ã‚°å‡ºåŠ› | `EnableDetailedPhases: false` ã«è¨­å®š |
| ãƒ¡ãƒ¢ãƒªå†…ä¼šè©±ãŒå¤šã™ãã‚‹ | `MaxConversationsInMemory` ã‚’50ã«å‰Šæ¸› |
| ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ | KeepAliveIntervalã‚’30ç§’ã«å»¶é•· |

```json
{
  "Observability": {
    "MaxConversationsInMemory": 50,
    "EnableDetailedPhases": false
  },
  "SignalR": {
    "KeepAliveInterval": "00:00:30"
  }
}
```

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¬ã‚¤ãƒ‰](TROUBLESHOOTING.md) - ä¸€èˆ¬çš„ãªå•é¡Œã¨è§£æ±ºæ–¹æ³•
- [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](ARCHITECTURE.md) - ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆè©³ç´°
- [Agenté–‹ç™ºã‚¬ã‚¤ãƒ‰](AGENT-DEVELOPMENT.md) - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

---

## ğŸ”— å¤–éƒ¨ãƒªãƒ³ã‚¯

- [SignalR ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://learn.microsoft.com/aspnet/core/signalr/introduction)
- [Fluent UI System Icons](https://github.com/microsoft/fluentui-system-icons)
- [Vue 3 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://vuejs.org/)
- [OpenTelemetry .NET](https://opentelemetry.io/docs/instrumentation/net/)

---

**Observability Dashboard**ã§å–¶æ¥­æ”¯æ´ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®å‹•ä½œã‚’å®Œå…¨ã«å¯è¦–åŒ–ã—ã¾ã—ã‚‡ã†ï¼ ğŸ“Š
